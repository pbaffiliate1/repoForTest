 var scriptName='script_1';
 var stores = require("store");
 var pubsub = require("pubsub");
 var devices = require("device");
 var util = require("./util");
 function run(stopOnError, errorMessages){ 
 var parameters="";
 var response=""; 
parameters={"groupName":"group1"};
util.callApi("SaveGroup", parameters, null, errorMessages, stopOnError, scriptName, "group1");
 response =  stores.create("Store1");
util.handleResponse(response, errorMessages, stopOnError, "stores.save", scriptName, "Store1");
 response =  stores.create("Store2");
util.handleResponse(response, errorMessages, stopOnError, "stores.save", scriptName, "Store2");
util.callApi("SaveConfiguration", {"apsdb.backgroundJobStore":"Store1","apsdb.defaultRepositoryName":"repoForTest","apsdb.defaultRepositoryOwner":"pbaffiliate1","apsdb.defaultRepositoryBranch":"branchForTest","apsdb.defaultRepositoryAccessToken":"9b51f48fcaf5123e22ee1043ef8249933f390eb2","apsdb.disableSchemalessDocs":"false","apsdb.optionalBindReferrer":"false","apsdb.defaultTokenExpires":"1800","apsdb.maximumTokenExpires":"86400","apsdb.defaultTokenLifeTime":"7200","apsdb.maximumTokenLifeTime":"604800","apsdb.allowForce200ResponseStatus":"true","apsdb.useDeprecatedSocialApis":"false","apsdb.facebookConsumerKey":"341726685895718","apsdb.facebookConsumerSecret":"62d55f6f76433f42c644ef2e9caf91bf","apsdb.facebookAccessToken":"EAAE2zHG5HCYBAFouk4bBIZA36RtMVzb4qIYmwbEspMfFadHJl5inytmPSqjHjTOdXKOC3k5IKirVJid8ABMFQVWnMPoGKIQgEd0QTh7lAtHaOsSPZBVH3cGjGzTI0IZBPmZBjR4eBl3DyU57XF9iJfukR2oppYMZD","apsdb.twitterConsumerKey":"AFfFJiOyUNegXZv6vYbXQ","apsdb.twitterConsumerSecret":"m3Mhm3gIaVq4Cv1Ctpe4w8KWE7ZqLbmA6OXAoLn7aY","apsdb.twitterAccessToken":"437388913-B2gHjIZ6w3RNSuWa71BDG6vk9XK8vbS30hnnJzEM","apsdb.twitterAccessTokenSecret":"Y8SxgSGrKmLcxMOqBt0xcELpq0WIz164LksLb7Gesk","apsdb.P3P":""}, null, errorMessages, stopOnError, scriptName, "");
util.callApi("SaveConfiguration", {"apsdb.DefaultStore.deleteDocumentACL":"nobody","apsdb.DefaultStore.getFileACL":"nobody","apsdb.DefaultStore.saveDocumentACL":"nobody","apsdb.DefaultStore.queryACL":"nobody"}, null, errorMessages, stopOnError, scriptName, "DefaultStore");
util.callApi("SaveConfiguration", {"apsdb.Store1.getFileACL":"authenticated","apsdb.Store1.queryACL":"authenticated","apsdb.Store1.saveDocumentACL":"authenticated","apsdb.Store1.deleteDocumentACL":"authenticated"}, null, errorMessages, stopOnError, scriptName, "Store1");
util.callApi("SaveConfiguration", {"apsdb.Store2.getFileACL":"nobody","apsdb.Store2.deleteDocumentACL":"nobody","apsdb.Store2.saveDocumentACL":"nobody","apsdb.Store2.queryACL":"nobody"}, null, errorMessages, stopOnError, scriptName, "Store2");
var channel_channel2_options={  "subscribeACL": "authenticated", "publishACL": "authenticated" }
response =  pubsub.createChannel("channel2",channel_channel2_options);
util.handleResponse(response, errorMessages, stopOnError, "pubsub.createChannel", scriptName, "channel2");
var channel_channel1_options={  "subscribeACL": "anonymous", "publishACL": "anonymous" }
response =  pubsub.createChannel("channel1",channel_channel1_options);
util.handleResponse(response, errorMessages, stopOnError, "pubsub.createChannel", scriptName, "channel1");
response =  pubsub.subscribe("channel1","script1","SCRIPT");
util.handleResponse(response, errorMessages, stopOnError, "pubsub.subscribe", scriptName, "channel1_script1");
response =  schedule("script1",new Date("2019-01-02T11:46:00+0000").toISOString());
util.handleResponse(response, errorMessages, stopOnError, "schedule", scriptName, "script1");
util.callApi("SaveUser", {"password":"user2","groups":"group1","login":"user2","name":"user2Name","id":"user2","email":"user2@email.com"}, null, errorMessages, stopOnError, scriptName, "user2");
util.callApi("SaveUser", {"password":"user1","groups":"group1","login":"user1","name":"user1Name","id":"user1","email":"user1@email.com"}, null, errorMessages, stopOnError, scriptName, "user1");
response = devices.save({"password":"device2","name":"device2Name","id":"device2"});
util.handleResponse(response, errorMessages, stopOnError, "devices.save", scriptName, "device2");
response = devices.generateToken("device2");
util.handleResponse(response, errorMessages, stopOnError, "devices.generateToken", scriptName, "device2");
response = devices.save({"password":"device1","groups":"group1","name":"device1Name","id":"device1"});
util.handleResponse(response, errorMessages, stopOnError, "devices.save", scriptName, "device1");
response = devices.generateToken("device1");
util.handleResponse(response, errorMessages, stopOnError, "devices.generateToken", scriptName, "device1");
storage.global.field1="10";
 }
