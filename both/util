function handleResponse( response, errorMessages, stopOnError, action ){
		if (response.metadata.status == "failure") {
				var errorMessage = "Error " + response.metadata.errorDetail + " in "+ action ;
			errorMessages.push(errorMessage);
			if (stopOnError=="true" || stopOnError==true) {
	        	throw(errorMessage);
	      	}
	    }
}
function callApi( action, parameters, credentials ,errorMessages, stopOnError){
	var resp=apsdb.callApi(action, parameters, null);
	handleResponse(resp, errorMessages, stopOnError, action);
	return resp;}
